<?xml version="1.0" encoding="UTF-8"?>
<!-- Related XMLSchema file: conf/schemas/test.xsd -->

<test name="RTPFLOW" description="RTPFLOW regression tests">

    <parameter name="[IPVersion]" operation="set" value="ipv4" editable="true" />
    <parameter name="[localHostSIP]" operation="system.ipaddress" value2="[IPVersion]"/>
     <!--parameter name="[localHostSIP]" operation="set" value="172.16.21.32"/-->
    <parameter name="[localHostSIP]" operation="set" value="[localHostSIP(0)]" editable="true" />
    <!--parameter name="[localPortSIP]" operation="file.readproperty" value="sip.properties" value2="listenpoint.LOCAL_PORT"/-->    	    
    <parameter name="[localSIP]" operation="set" value="[localHostSIP]:[localPortSIP]"/>
    <parameter name="[remoteHostSIP]" operation="system.ipaddress" value2="[IPVersion]"/>
    <parameter name="[remoteHostSIP]" operation="set" value="[remoteHostSIP(0)]" editable="true"/>
	<!--parameter name="[remoteHostSIP]" operation="set" value="172.16.21.48"/-->
    <!--parameter name="[remotePortSIP]" operation="file.readproperty" value="sip.properties" value2="listenpoint.LOCAL_PORT"/-->    	    
    <!--parameter name="[remotePortSIP]" operation="set" value="5060"/-->    	    
    <parameter name="[remoteSIP]" operation="set" value="[remoteHostSIP]:[remotePortSIP]"/>
    
    <parameter name="[localHostRTP]" operation="system.ipaddress" value2="[IPVersion]"/>
    <!--<parameter name="[localHostRTP]" operation="set" value="127.0.0.1"/>-->
    <parameter name="[localHostRTP]" operation="set" value="[localHostRTP(0)]" editable="true"/>
    <parameter name="[localPortRTP]" operation="set" value="10000" editable="true" />
    <parameter name="[remoteHostRTP]" operation="system.ipaddress" value2="[IPVersion]"/>
    <!--<parameter name="[remoteHostRTP]" operation="set" value="127.0.0.1"/>-->
    <parameter name="[remoteHostRTP]" operation="set" value="[remoteHostRTP(0)]"  editable="true"/>
    <parameter name="[remotePortRTP]" operation="set" value="11000" editable="true" />

    <!-- value2 = deltaTime (millisecondes)-->
    <parameter name="fileWave" operation="file.readwave" value="rtpflow.wav" value2="20"/>

    <testcase name="000_sendFlowReceivePacket" state="true">
        <scenario name="[localPortRTP]">000_sendFlowReceivePacket/session1.xml</scenario>
        <scenario name="[remotePortRTP]">000_sendFlowReceivePacket/session2.xml</scenario>
    </testcase>

    <testcase name="001_sendFlowReceiveFlow" state="true">
        <scenario name="[localPortRTP]">001_sendFlowReceiveFlow/session1.xml</scenario>
        <scenario name="[remotePortRTP]">001_sendFlowReceiveFlow/session2.xml</scenario>
    </testcase>

    <testcase name="002_testAllParameters" state="true">
        <scenario name="[localPortRTP]">002_testAllParameters/session1.xml</scenario>
        <scenario name="[remotePortRTP]">002_testAllParameters/session2.xml</scenario>
    </testcase>

    <testcase name="004_sendFlowBitrate" state="true">
        <scenario name="[localPortRTP]">004_sendFlowBitrate/session1.xml</scenario>
        <scenario name="[remotePortRTP]">004_sendFlowBitrate/session2.xml</scenario>
    </testcase>

    <testcase name="005_sendFlowCSV" state="true">
        <scenario name="[localPortRTP]">005_sendFlowCSV/session1.xml</scenario>
        <scenario name="[remotePortRTP]">005_sendFlowCSV/session2.xml</scenario>
    </testcase>

    <testcase name="006_sendFlowWithDisturbance" state="true">
        <scenario name="[localPortRTP]">006_sendFlowWithDisturbance/session1.xml</scenario>
        <scenario name="[remotePortRTP]">006_sendFlowWithDisturbance/session2.xml</scenario>
    </testcase>

    <testcase name="007_sendFlowWithJitter" state="true">
        <scenario name="[localPortRTP]">007_sendFlowWithJitter/session1.xml</scenario>
        <scenario name="[remotePortRTP]">007_sendFlowWithJitter/session2.xml</scenario>
    </testcase>

    <testcase name="008_sendFilePDMLWireshark" state="true">
        <scenario name="[localPortRTP]">008_sendFilePDMLWireshark/session1.xml</scenario>
        <scenario name="[remotePortRTP]">008_sendFilePDMLWireshark/session2.xml</scenario>
    </testcase>
	
	<testcase name="009_sendFileWAV" state="true">
        <scenario name="[localPortRTP]">009_sendFileWAV/session1.xml</scenario>
        <scenario name="[remotePortRTP]">009_sendFileWAV/session2.xml</scenario>
    </testcase>

    <testcase name="010_sendPacketsReceiveFlow" state="true">
        <parameter name="[waitSemaphore]" operation="set" value="false"/>            
        <scenario name="[localPortRTP]">010_sendPacketsReceiveFlow/session1.xml</scenario>
        <scenario name="[remotePortRTP]">010_sendPacketsReceiveFlow/session2.xml</scenario>
    </testcase>

    <testcase name="011_sendFlowsParallel" state="true">
        <scenario name="[localPortRTP]">011_sendFlowsParallel/session1.xml</scenario>
        <scenario name="RTPFLOW">011_sendFlowsParallel/session2.xml</scenario>
    </testcase>

    <testcase name="012_receiveSilentPacket" state="true">
        <scenario name="[localPortRTP]">012_receiveSilentPacket/session1.xml</scenario>
        <scenario name="[remotePortRTP]">012_receiveSilentPacket/session2.xml</scenario>
    </testcase>

    <testcase name="013_receivePeriodic" state="true">
        <scenario name="[localPortRTP]">013_receivePeriodic/session1.xml</scenario>
        <scenario name="[remotePortRTP]">013_receivePeriodic/session2.xml</scenario>
    </testcase>

    <testcase name="014_receiveNoPacket" state="true">
        <scenario name="[localPortRTP]">014_receiveNoPacket/session1.xml</scenario>
        <scenario name="[remotePortRTP]">014_receiveNoPacket/session2.xml</scenario>
    </testcase>

    <testcase name="020_qosMeasurments" state="true">
        <scenario name="[localPortRTP]">020_qosMeasurments/session1.xml</scenario>
        <scenario name="[remotePortRTP]">020_qosMeasurments/session2.xml</scenario>
    </testcase>

    <testcase name="021_ignoreReceivedData" state="true">
        <scenario name="[localPortRTP]">021_ignoreReceivedData/session1.xml</scenario>
        <scenario name="[remotePortRTP]">021_ignoreReceivedData/session2.xml</scenario>
    </testcase>

    <testcase name="030_probe_capture" state="true">
        <parameter name="[waitSemaphore]" operation="set" value="true"/>        
        <scenario name="[localPortRTP]">010_sendPacketsReceiveFlow/session1.xml</scenario>
        <scenario name="[remotePortRTP]">010_sendPacketsReceiveFlow/session2.xml</scenario>
        <scenario name="default">030_probe_capture/probe.xml</scenario>
    </testcase>

    <testcase name="100_call_sip_rtp" state="true">
        <parameter name="[CallDurationSec]" operation="set" value="1" description="Duration (in sec.) of the call"/>    	       	       
    	<parameter name="[dialingDelay]" operation="set" value="0.5" description="Dialing delay (in seconds) : time between INVITE and 180 response"/>    	       	       
	<parameter name="[timeSpacing]" operation="set" value="0.005" description="Time spacing (in seconds) : time between real and theorical timestamp"/>    	       	       
	<parameter name="[packetLost]" operation="set" value="0.1" description="Packets lost (in percent)"/>    	       	       

        <parameter name="[localPortSIP]" operation="set" value="5070"/>    	    
        <parameter name="[remotePortSIP]" operation="set" value="5080"/>    	    
        
        <parameter name="[domainName]" operation="set" value="devoteam.com" editable="true" description="Domain name for inviter and invitee identities"/>
	<parameter name="[inviter]" operation="set" value="bob" editable="true" description="Inviter user name"/>
    	<parameter name="[invitee]" operation="set" value="alice" editable="true" description="Invitee user name"/>	

	<parameter name="[filename]" operation="set" value="rtpflow.wav" editable="true"/>
    	<parameter name="fileWave" operation="file.readwave" value="[filename]" value2="20"/>
    	<parameter name="[payloadList]" operation="set" value="[[fileWave(0)]]"/>
    	<parameter name="[payloadType]" operation="set" value="[[fileWave(1)]]"/>
    	<parameter name="[bitRate]" operation="set" value="[[fileWave(2)]]"/>
    	<parameter name="[nbPacket]" operation="list.size" value="[payloadList]"/>

        <scenario name="[localPortSIP],[localPortRTP]">100_call_sip_rtp/UAC.xml</scenario>
        <scenario name="[remotePortSIP],[remotePortRTP]">100_call_sip_rtp/UAS.xml</scenario>
    </testcase>
	
	<testcase name="200_srtp_sendFileWave" state="true">
		<scenario name="inviter">200_srtp_sendFileWave/RTPFLOW.xml</scenario>
		<scenario name="invitee">200_srtp_sendFileWave/RTPFLOW2.xml</scenario>
	</testcase>
	
    <testcase name="rtp/801_imsloader_talk" state="false">
        <scenario name="[localPortSIP]">801_imsloader_talk/scenario.xml</scenario>
    </testcase>

</test>
