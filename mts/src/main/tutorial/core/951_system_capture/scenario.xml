<?xml version="1.0" encoding="UTF-8"?><!--Le mécanisme est le suivant; un scenario lance, via la commande system l'utilitaire windump (tcpdump, pour windows).    Cet utilitaire va capturer les paquets, et les écrire dans un fichier .pcap (avec un filtre qui peut être configuré dans le scenario (même format qu'etherreal)).    Le nom du fichier est à construire dans le scenario avec le systeme de paramètres (dans l'exemple, le nom du scénario + timestamp).    Ce fichier pourra par la suite être ouvert par etherreal.Ce scenario reste bloqué sur cette commande car windump ne rend pas la main. Ce scenario doit donc être "dédié" a la capture.Il suffit ensuite, a la fin du test, dans un autre scénario, d'appeler la commande "taskkill WinDump" via l'opération system.La commande taskkill est supposé être disponible dans les Windows 2000 et XP.Cette deuxieme commande va donc tuer le processus windump et permettre au scénario bloqué de se terminer (et donc de ne pas bloquer le testcase entier).Ce scenario sera en succès car la commande windump est en fait lancée dans un .bat. Le code d'erreur de l'arrêt violent de windump n'est pas propagé.Les contraintes:    Prévu pour windows, mais il est tout a fait possible de réaliser l'équivalent sous linux.    Avoir winpcap d'installé (nécessaire pour windump).    Positionner windump et le .bat appelé par XML Loader fans le PATH, par exemple C:/Windows (pour qu'ils soient trouvés par l'opération system d'XML Loader).    Lors de l'appel à taskkill, tous les process nommés WinDump seront tués. Il n'est donc pas possible de lancer plusieurs captures simultanément.Piste d'améliorations:    Trouver un moyen de donner un nom unique au processus à tuer.--><scenario>    <parameter name="[fileName]" operation="system.timestamp" value="1970" />    <parameter name="[fileName]" operation="set"           value="[scenarioName]_[fileName].pcap"/>    <parameter name="[device]"   operation="set"           value="\Device\NPF_{17A7833D-60DB-47E0-BD64-D06E415088F7}"/>    <parameter name="[filter]"   operation="set"           value=""/>    <system command="capture.bat [device] [fileName] [filter]" /></scenario>