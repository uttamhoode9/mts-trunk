<?xml version="1.0" encoding="UTF-8"?>
<!-- Related XMLSchema file: conf/schemas/test.xsd -->

<test name="CORE" description="CORE regression tests">

    <parameter name="[param_1]" operation="set" value="KO1" editable="true" description="Parameter 1"/>
    <parameter name="[param_2]" operation="set" value="KO2" editable="true" description="Parameter 2"/>
    <parameter name="[param_3]" operation="set" value="KO3" editable="true" description="Parameter 3"/>
    <parameter name="[param_3_ref]" operation="set" value="[param_3]" editable="true" description="Parameter 3"/>
    
    <parameter name="[rep]" operation="set" value="../tutorial/core/801_audio_comparison" description="bin repertory to sound file repertory"/>
    <parameter name="[file_test]" operation="set" value="[rep]/rtpflow.wav" description="file to test"/>
    <parameter name="[file_ref]" operation="set" value="[rep]/rtpflowReceived_test_1.wav" description="file reference"/>
    
	<parameter name="[repertory_ref]" operation="set" value="[rep]\test_rep" description="repertory reference"/>
    <parameter name="[bit_error]" operation="set" value="4" description="bit error (default=4)"/>
    <parameter name="[offset]" operation="set" value="500" description="offset (default=500)"/>
		
    <parameter name="[int_1]" operation="set" value="8"/>
    <parameter name="[int_1]" operation="list.addlast" value="[int_1]" value2="6"/>
    <parameter name="[int_2]" operation="set" value="4"/>
    <parameter name="[int_2]" operation="list.addlast" value="[int_2]" value2="6"/>
	<parameter name="[test_var_1]" operation="set" value="toto"/>
    <parameter name="[test_var_2]" operation="set" value="titi"/>
    <parameter name="[test_var_1]" operation="list.addlast" value="[test_var_1]" value2="titi"/>
    <parameter name="[test_var_2]" operation="list.addlast" value="[test_var_2]" value2="toto"/>

    <parameter name="[leveltest]" operation="set" value="toto test" />

    <parameter name="[for_scenario_name]" operation="set" value="scenario_for_" />
    <parameter name="[for_testcase_name]" operation="set" value="coretestcase_for_" />
    
    <parameter name="[testcase_state]" operation="set" value="true" />

    <!-- parameter for monitoring testacse 902_system_monitor -->
    <parameter name="[interval]"		operation="set" description="interval in sec between each vmstat result" value="1"	editable="true"/>
    <parameter name="[vmstatInterval]"	operation="set" description="interval in sec between each vmstat run" value="1" editable="true"/>

    <parameter name="[nameServer]" operation="file.readCsv" value="./vmstat_servers.csv" value2="nameServer" />
    <parameter name="[IPServer]" operation="file.readCsv" value="./vmstat_servers.csv" value2="IPServer" />
    <parameter name="[login]" operation="file.readCsv" value="./vmstat_servers.csv" value2="login" />
    <parameter name="[passwd]" operation="file.readCsv" value="./vmstat_servers.csv" value2="passwd" />

    <parameter name="[nbServer]" operation="list.size" value="[nameServer]"/>   
    <parameter name="[nbServer]" operation="number.substract" value="[nbServer]" value2="1"/>
    
    <parameter name="[date]" operation="system.timestamp" value="1970"/>
    <parameter name="[date]" operation="number.toDate" value="[date]" value2="dd-MM-yy_HH-mm"/>

    <!-- run profile at test level : applicable if not specifiy at testcase level -->
    <runProfile>
        <step time="0" period="0"/>
        <end delay="600000"/>
    </runProfile>

    <testcase name="000_pause" description="tescase pause operation" state="[testcase_state]">
        <runProfile>
            <step time="0" period="0"/>
            <end delay="10"/>
        </runProfile>

        <scenario name="[for_scenario_name]" description="scenario pause operation">
        
000_pause/scenario.xml

    </scenario>
    </testcase>

    <testcase name="010_goto" description="test goto instruction" state="[testcase_state]">
        <scenario name="goto">010_goto/scenario.xml</scenario>
    </testcase>
    
    <testcase name="011_advanced_goto" description="test goto instruction" state="[testcase_state]">
        <parameter name="[testcaseParameter]" operation="set" value="5" />
        <runProfile>
            <start delay="[testcaseParameter]" />
            <step time="00" period="1"/>
            <step time="10" period="1"/>
            <step time="10" period="0.1"/>
            <step time="30" period="0.1"/>
            <step time="30" period="1"/>
            <end delay="90" />
        </runProfile>
        <scenario name="adv_goto">011_advanced_goto/scenario.xml</scenario>
    </testcase>

    <testcase name="020_if_then" description="test if then instruction" state="[testcase_state]">
        <scenario name="if_then">020_if_then/scenario.xml</scenario>
    </testcase>

    <testcase name="021_if_else" description="test if else instruction" state="[testcase_state]">
        <scenario name="if_else">021_if_else/scenario.xml</scenario>
    </testcase>

    <testcase name="022_conditions" description="test complex conditions" state="[testcase_state]">
        <scenario name="conditions">022_conditions/scenario.xml</scenario>
    </testcase>

    <testcase name="023_function" description="test function and call" state="[testcase_state]">
        <scenario name="function">023_function/scenario.xml</scenario>
    </testcase>

    <testcase name="030_semaphore" description="test semphores" state="[testcase_state]">
        <scenario name="semaphore1">030_semaphore/scenario_user_1.xml</scenario>
        <scenario name="semaphore2">030_semaphore/scenario_user_2.xml</scenario>
    </testcase>

    <testcase name="031_semaphore_param" description="test semphores" state="[testcase_state]">
        <scenario name="semaphore1">031_semaphore_param/scenario_user_1.xml</scenario>
        <scenario name="semaphore2">031_semaphore_param/scenario_user_2.xml</scenario>
    </testcase>

    <testcase name="050_system" description="Test system command " state="[testcase_state]">
        <scenario name="system">050_system/system.xml</scenario>
    </testcase>
           
    <testcase name="070_parameters" description="test variables" state="[testcase_state]">
        <scenario name="nameAndId">070_parameters/nameAndId.xml</scenario>
		<scenario name="xpath">070_parameters/xpath.xml</scenario>
    </testcase>
    
    <testcase name="071_parameters_level" description="test variables" state="[testcase_state]">
        <parameter name="[leveltestcase]" operation="set" value="toto testcase" />
	<parameter name="[tabTcTc(0)]" operation="set" value="value 0" />
	<parameter name="[tabTcTc(1)]" operation="set" value="value 1" />
	<parameter name="[tabTcTc(2)]" operation="set" value="value 2" />

        <scenario name="init">071_parameters_level/scenario.xml</scenario>
        <scenario name="scenario_1">071_parameters_level/scenario_1.xml</scenario>
        <scenario name="scenario_2">071_parameters_level/scenario_2.xml</scenario>
        <scenario name="scenario_3">071_parameters_level/scenario_3.xml</scenario>
    </testcase>
    
    <testcase name="parameters_index" description="test variables" state="[testcase_state]">
        <scenario name="scenario">072_parameters_index/scenario.xml</scenario>
    </testcase>

    <testcase name="075_parameters_name" description="test variables" state="[testcase_state]">
        <scenario name="scenario">075_parameters_name/scenario.xml</scenario>
    </testcase>

    <testcase name="076_parameters_pluggable" description="test pluggable components" state="[testcase_state]">
        <scenario name="scenario">076_parameters_pluggable/scenario.xml</scenario>
    </testcase>

    <testcase name="080_exit_default" description="" state="[testcase_state]">
        <scenario name="exit_default">080_exit_default/exit.xml</scenario>
    </testcase>

    <testcase name="081_exit_failed" description="" state="[testcase_state]">
        <scenario name="exit_failed">081_exit_failed/exit.xml</scenario>
    </testcase>

    <testcase name="082_exit_success" description="" state="[testcase_state]">
        <scenario name="exit_success">082_exit_success/exit.xml</scenario>
    </testcase>

    <testcase name="100_log" description="" state="[testcase_state]">
        <scenario name="log">100_log/scenario.xml</scenario>
    </testcase>

    <testcase name="110_stats" description="" state="[testcase_state]">
        <scenario name="counter">110_stats/counter.xml</scenario>
        <scenario name="flow">110_stats/flow.xml</scenario>
        <scenario name="flow_list">110_stats/flow_list.xml</scenario>
        <scenario name="value">110_stats/value.xml</scenario>
        <scenario name="percent">110_stats/percent.xml</scenario>
        <scenario name="text">110_stats/text.xml</scenario>
    </testcase>

    <testcase name="120_try" description="" state="[testcase_state]">
        <scenario name="try">120_try/scenario.xml</scenario>
    </testcase>

    <testcase name="130_switch" description="" state="[testcase_state]">
        <scenario name="switch">130_switch/scenario.xml</scenario>
    </testcase>

    <testcase name="140_finally" description="" state="[testcase_state]">
        <scenario name="finally">140_finally/scenario.xml</scenario>
    </testcase>

    <testcase name="150_for" description="" state="[testcase_state]">
        <scenario name="for">150_for/scenario.xml</scenario>
    </testcase>

    <testcase name="200_all" description="" state="[testcase_state]">
        <scenario name="all_core">200_all_core/scenario.xml</scenario>
    </testcase>

    <testcase name="701_operator_file" description="" state="[testcase_state]">
        <scenario name="701_operator_file">701_operator_file/scenario.xml</scenario>
    </testcase>

    <testcase name="702_operator_binary" description="" state="[testcase_state]">
        <scenario name="702_operator_binary">702_operator_binary/scenario.xml</scenario>
    </testcase>

    <testcase name="703_operator_string" description="" state="[testcase_state]">
        <scenario name="703_operator_string">703_operator_string/scenario.xml</scenario>
    </testcase>

    <testcase name="704_operator_number" description="" state="[testcase_state]">
        <scenario name="704_operator_number">704_operator_number/scenario.xml</scenario>
    </testcase>

    <testcase name="705_operator_list" description="" state="[testcase_state]">
        <scenario name="705_operator_list">705_operator_list/scenario.xml</scenario>
    </testcase>

    <testcase name="706_operator_boolean" description="" state="[testcase_state]">
        <scenario name="706_operator_boolean">706_operator_boolean/scenario.xml</scenario>
    </testcase>

    <testcase name="707_operator_protocol" description="" state="[testcase_state]">
        <scenario name="707_operator_protocol_uri">707_operator_protocol/setFromURI.xml</scenario>
        <scenario name="707_operator_protocol_address">707_operator_protocol/setFromAddress.xml</scenario>
        <scenario name="707_operator_protocol_sdp">707_operator_protocol/setFromSDP.xml</scenario>
    </testcase>

    <testcase name="708_operator_system" description="" state="[testcase_state]">
        <scenario name="708_operator_system">708_operator_system/scenario.xml</scenario>
    </testcase>

	
	
	<testcase name="801_audio_comparison" description="" state="[testcase_state]">
		<scenario name="801_audio_comparison">801_audio_comparison/scenario.xml</scenario>
    </testcase>

    <for index="[i]" from="008" to="4" step="-2">
        <testcase name="[for_testcase_name][i]" description="diameter" state="[testcase_state]">
            <parameter name="[index]" operation="set" value="[i]" />
            <scenario name="[for_scenario_name][i]">090_for_test/scenario.xml</scenario>
        </testcase>
    </for>

    <for index="[i]" from="004" to="0" step="-2">
        <testcase name="[for_testcase_name][i]" description="diameter" state="[testcase_state]">
            <parameter name="[index]" operation="set" value="[i]" />
            <scenario name="[for_scenario_name][i]">090_for_test/scenario.xml</scenario>
        </testcase>
    </for>


    <testcase name="runprofile.period" description="Run profile with period steps" state="[testcase_state]">
        <runProfile>
            <step time="00" period="1"/>
            <step time="10" period="0.1"/>
            <step time="30" period="0.1"/>
            <step time="55" period="1"/>
            <step time="60" period="1"/>
            <end delay="300"/>
        </runProfile>

        <scenario name="runprofile.period">091_runprofile/scenario.xml</scenario>
    </testcase>

    <testcase name="runprofile.frequency" description="Run profile with frequency steps" state="[testcase_state]">
        <runProfile>
            <start delay="5"/>
            <step time="0" frequency="100"/>
            <step time="30" frequency="500"/>
            <step time="45" frequency="500"/>
            <step time="60" frequency="300"/>
            <end delay="120"/>
        </runProfile>
        <scenario name="runprofile.frequency">091_runprofile/scenario.xml</scenario>
    </testcase>

    <testcase name="runprofile.delay" description="Run profile with delay start end conditions" state="[testcase_state]">
        <runProfile>
            <start delay="1.5"/>
            <step time="0" frequency="1000"/>
            <end delay="50"/>
        </runProfile>

        <scenario name="runprofile.delay">091_runprofile/scenario.xml</scenario>
    </testcase>

    <testcase name="runprofile.time" description="Run profile with time start end conditions" state="[testcase_state]">
        <runProfile>
            <start time=":::001"/>
            <step time="0" period="0"/>
            <end time=":::999"/>
        </runProfile>

        <scenario name="runprofile.time">091_runprofile/scenario.xml</scenario>
    </testcase>

    <testcase name="runprofile.iteration" description="Run profile with iteration end conditions" state="[testcase_state]">
        <runProfile>
            <step time="0" frequency="10000"/>
            <end iteration="600000"/>
        </runProfile>

        <scenario name="runprofile.iteration">091_runprofile/scenario.xml</scenario>
    </testcase>

    <testcase name="testcase.interruptible" description="Run none-interruptible testcase" state="[testcase_state]" interruptible="false">
        <scenario name="testcase.interruptible">091_runprofile/scenario.xml</scenario>
    </testcase>

    <testcase name="901_system_monitor" description="Test system monitoring " state="false">
        <scenario name="system">901_system_monitor/scenario.xml</scenario>
    </testcase>

    <for index="[numServer]" from="0" to="[nbServer]" step="1">
	<testcase name="902_system_monitoring [nameServer([numServer])]" state="false">
		<parameter name="[csvFilename]" operation="set" value="vmstat_[interval]_[nameServer([numServer])]_[date].csv"/>
		<parameter name="[server]" operation="set" value="[IPServer([numServer])]"/>
		<parameter name="[login]" operation="set" value="[login([numServer])]"/>
		<parameter name="[passwd]" operation="set" value="[passwd([numServer])]"/>
		<runProfile>                
			<step time="0" period="[vmstatInterval]"/>
		</runProfile>
		<scenario name="902_system_monitor">902_system_monitor/monitor.xml</scenario>
	</testcase>
    </for>

    <testcase name="951_system_capture" description="Test system command " state="false">
        <scenario name="system">951_system_capture/scenario.xml</scenario>
        <scenario name="system_kill">951_system_capture/scenario_kill.xml</scenario>
    </testcase>

</test>
