<?xml version="1.0" encoding="UTF-8"?>

<test name="GTP" description="GTP (V1 V2 Prime) regression tests">

    <parameter name="[remoteHost]" operation="system.ipaddress" />
    <!--parameter name="[remoteHost]" operation="set" value="172.20.70.43"/-->
    <parameter name="[remoteHost]" operation="set" value="[remoteHost(0)]" editable="true" />
    <parameter name="[remotePort]" operation="file.readproperty" value="gtp.properties" value2="listenpoint.LOCAL_PORT"/>
    <!--parameter name="[remotePort]" operation="set" value="2123"/-->    
    <parameter name="[remotePort]" operation="set" value="[remotePort]" editable="true" />

    <parameter name="[transportGTP]" operation="set" value="UDP"/>
    <parameter name="[transportGTPPrime]" operation="set" value="TCP"/>

    <testcase name="GTP v2 ------------------------------------------------------" state="false"/>

    <testcase name="GTP v2 101_call_setup" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTP]"/>
        <scenario name="client">101_call_setup/client.xml</scenario>
        <scenario name="GTP">101_call_setup/server.xml</scenario>
    </testcase>
    
    <testcase name="GTP v2 101_echo" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTP]"/>
        <scenario name="client">101_echo/client.xml</scenario>
        <scenario name="GTP">101_echo/server.xml</scenario>
    </testcase>
    
    <testcase name="GTP v2 111_createSession" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTP]"/>
        <scenario name="client">111_createSession/client.xml</scenario>
        <scenario name="GTP">111_createSession/server.xml</scenario>
    </testcase>
    
    <testcase name="GTP v2 112_deleteSession" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTP]"/>
        <scenario name="client">112_deleteSession/client.xml</scenario>
        <scenario name="GTP">112_deleteSession/server.xml</scenario>
    </testcase>
    
    <testcase name="GTP v2 180_set_from_msg" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTP]"/>
        <scenario name="client">180_set_from_msg/client.xml</scenario>
        <scenario name="GTP">180_set_from_msg/server.xml</scenario>
    </testcase>

    <testcase name="GTP v2 181_listenpoint" state="true">
        <parameter name="[listenHost]" operation="system.ipaddress" />
        <!--parameter name="[listenHost]" operation="set" value="172.20.70.43"/-->    
        <parameter name="[listenHost]" operation="set" value="[listenHost(0)]" editable="true" />
        <!--parameter name="[listenHost]" operation="file.readproperty" value="gtp.properties" value2="listenpoint.LOCAL_PORT"/-->
        <parameter name="[listenPort]" operation="set" value="2123"/>    
        <parameter name="[listenPort]" operation="set" value="[listenPort]" editable="true" />
        <parameter name="[transport]" operation="set" value="[transportGTP]"/>
        
        <scenario name="client">181_listenpoint/client.xml</scenario>
        <scenario name="GTP">181_listenpoint/server.xml</scenario>
    </testcase>
    
    <testcase name="GTP v2 182_no_dico" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTP]"/>
        <scenario name="client">182_no_dico/client.xml</scenario>
        <scenario name="GTP">182_no_dico/server.xml</scenario>
    </testcase>
    
    <testcase name="GTP v1 ------------------------------------------------------" state="false"/>
            
    <testcase name="GTP v1 201_echo" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTP]"/>
        <scenario name="client">201_echo/client.xml</scenario>
        <scenario name="GTP">201_echo/server.xml</scenario>
    </testcase>
    
    <testcase name="GTP v1 202_errorIndication KO" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTP]"/>
	      <!-- fonctionne mais la capture wireshark n'est pas bien decode -->
	      <!-- private extension fait une exception dans les TLSs -->
        <scenario name="client">202_errorIndication/client.xml</scenario>
        <scenario name="GTP">202_errorIndication/server.xml</scenario>
    </testcase>
    
    <testcase name="GTP v1 203_supportedExtensionHeadersNotification" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTP]"/>
        <scenario name="client">203_supportedExtensionHeadersNotification/client.xml</scenario>
        <!--scenario name="GTP">203_supportedExtensionHeadersNotification/server.xml</scenario-->
    </testcase>

    <testcase name="GTP v1 280_set_from_msg" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTP]"/>
        <scenario name="client">280_set_from_msg/client.xml</scenario>
        <scenario name="GTP">280_set_from_msg/server.xml</scenario>
    </testcase>

    <testcase name="GTP Prime ------------------------------------------------------" state="false"/>
    
    <testcase name="GTP Pr 301_echo" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTPPrime]"/>
        <scenario name="client">301_echo/client.xml</scenario>
        <scenario name="GTP">301_echo/server.xml</scenario>
    </testcase>

    <testcase name="GTP Pr 302_nodeAlive" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTPPrime]"/>
        <scenario name="client">302_nodeAlive/client.xml</scenario>
        <scenario name="GTP">302_nodeAlive/server.xml</scenario>
    </testcase>

    <testcase name="GTP Pr 303_redirection" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTPPrime]"/>
        <scenario name="client">303_redirection/client.xml</scenario>
        <scenario name="GTP">303_redirection/server.xml</scenario>
    </testcase>

    <testcase name="GTP Pr 304_dataRecordTransfer" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTPPrime]"/>
        <scenario name="client">304_dataRecordTransfer/client.xml</scenario>
        <scenario name="GTP">304_dataRecordTransfer/server.xml</scenario>
    </testcase>
    
    <testcase name="GTP Pr 380_set_from_msg" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTPPrime]"/>
        <scenario name="client">380_set_from_msg/client.xml</scenario>
        <scenario name="GTP">380_set_from_msg/server.xml</scenario>
    </testcase>
    
    <testcase name="GTP Pr 381_listenpoint" state="true">
        <parameter name="[listenHost]" operation="system.ipaddress" />
        <!--parameter name="[listenHost]" operation="set" value="172.20.70.43"/-->    
        <parameter name="[listenHost]" operation="set" value="[listenHost(0)]" editable="true" />
        <!--parameter name="[listenHost]" operation="file.readproperty" value="gtp.properties" value2="listenpoint.LOCAL_PORT"/-->
        <parameter name="[listenPort]" operation="set" value="2123"/>    
        <parameter name="[listenPort]" operation="set" value="[listenPort]" editable="true" />
        <parameter name="[transport]" operation="set" value="[transportGTPPrime]"/>
        
        <scenario name="client">381_listenpoint/client.xml</scenario>
        <scenario name="GTP">381_listenpoint/server.xml</scenario>
    </testcase>
    
    <testcase name="GTP Pr 382_channel" state="true">
        <parameter name="[transport]" operation="set" value="[transportGTPPrime]"/>
        <scenario name="client">382_channel/client.xml</scenario>
        <scenario name="GTP">382_channel/server.xml</scenario>
    </testcase>
    
</test>
 
