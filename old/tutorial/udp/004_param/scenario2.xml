<?xml version="1.0" encoding="UTF-8"?>

<scenario>

    <createListenpointUDP name="socket1" localHost="[localHost]" localPort="[localPort]" />
	<createListenpointUDP name="socket2" localHost="[remoteHost]" localPort="[remotePort]" />
   
   	<parameter name="contents" operation="set" value="h41:1 h2241:1 b01000001:1 d0000065:1 65" />
		
    <sendMessageUDP listenpoint="socket1" remoteHost="[remoteHost]" remotePort="[remotePort]" >
        <data format="binary">[contents]</data>
    </sendMessageUDP>

    <receiveMessageUDP timeout="10">
        <parameter name="[contents]" operation="protocol.setFromMessage" value="data.text" />
        <parameter name="[remoteHost]" operation="protocol.setFromMessage" value="channel.remoteHost" />
        <parameter name="[remotePort]" operation="protocol.setFromMessage" value="channel.remotePort" />
    </receiveMessageUDP>

    <test parameter="[remoteHost]" condition="string.equals" value="[localHost]"/>
    <test parameter="[remotePort]" condition="string.equals" value="[localPort]"/>

    <finally>
        <removeListenpointUDP name="socket1" />
        <removeListenpointUDP name="socket2" />
    </finally>
        
</scenario>
